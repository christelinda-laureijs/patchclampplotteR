<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Spontaneous Current Analysis • patchclampplotteR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spontaneous Current Analysis">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-M92L6F0ZB2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M92L6F0ZB2');
</script><link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="icon" type="image/x-icon" href="../favicon.ico">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">patchclampplotteR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/patchclampplotteR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/action-potential-analysis.html">Action Potential Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/evoked-current-analysis.html">Evoked Current Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/spontaneous-current-analysis.html">Spontaneous Current Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/christelinda-laureijs/patchclampplotteR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spontaneous Current Analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/christelinda-laureijs/patchclampplotteR/blob/main/vignettes/articles/spontaneous-current-analysis.Rmd" class="external-link"><code>vignettes/articles/spontaneous-current-analysis.Rmd</code></a></small>
      <div class="d-none name"><code>spontaneous-current-analysis.Rmd</code></div>
    </div>

    
    
<p>The goal of spontaneous current analysis is to identify and analyze
currents while avoiding spikes from stimulus artifacts and noise. This
article will show you how to analyze spontaneous currents in raw .abf
recordings using Event Detection in Clampfit. The data will then be
ready for further analyses with <code>patchclampplotteR</code>.</p>
<p><img src="figures%2Fnoise-vs-currents-diagram.png" alt="An image of a current clamp steps recording with annotations. Large spikes are true currents and small spikes are noise." width="75%" style="display: block; margin: auto;"></p>
<p>There are many advanced approaches to noise exclusion in
electrophysiological recordings (see <a href="https://doi.org/10.1073/pnas.2315804121" class="external-link">Wang et al., 2023</a>; <a href="https://doi.org/10.1016/S0956-5663(02)00053-2" class="external-link">Kudoh &amp;
Taguchi, 2002</a>; and <a href="https://doi.org/10.1016/j.bpj.2012.08.039" class="external-link">Pernía-Andrade et al.,
2012</a> for some methods). I am using a simple threshold method, where
any spikes below the threshold are not counted as synaptic events.</p>
<p><img src="figures%2FThreshold-figure.png" alt="An image of a current clamp steps recording with annotations. After adding a threshold, only currents are identified." width="75%" style="display: block; margin: auto;"></p>
<p>In this method, the threshold is five times the standard deviation of
the noise amplitudes during a flat baseline region. This is comparable
to the root mean square noise (RMS) used in MiniAnalysis.</p>
<div class="section level2">
<h2 id="combine-recordings">Combine recordings<a class="anchor" aria-label="anchor" href="#combine-recordings"></a>
</h2>
<blockquote>
<p>The data from our lab is not a continuous 30-minute recording. We
pause the recording every 5 minutes to obtain parameters like access
resistance and capacitance from the membrane test before resuming
recording. If your data is already a continuous file, you can skip steps
1-2.</p>
</blockquote>
<blockquote>
<p>You may already have a concatenated file from your <a href="https://christelinda-laureijs.github.io/patchclampplotteR/articles/evoked-current-analysis.html">Evoked
current analysis</a>. This also means you can skip steps 1-2.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Open the first .abf file in your recording series, and use the
<code>Next File</code> button to quickly open all files in the
series.</p></li>
<li><p>Click on <code>Analyze</code> -&gt;
<code>Concatenate Files</code> and select all files that belong to a
recording from a single cell. All the recordings will be combined into a
continuous recording with no gaps.</p></li>
</ol>
<p><img src="figures%2FConcatenate-files.png" alt="A screenshot of the Concatenate files dialog box in Clampfit showing that all files are selected." width="75%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="view-recording">View recording<a class="anchor" aria-label="anchor" href="#view-recording"></a>
</h2>
<ol start="3" style="list-style-type: decimal">
<li><p>Click on the <code>Show Aquistion Signals</code> button and then
<code>Previous Signal</code> (blue arrow in the figure below) to view
the sweeps showing changes in current (<code>Im_primary ()</code>). The
traces should all be stacked on top of each other, but if they are not,
click on <code>View</code> -&gt; <code>Data Display</code> -&gt;
<code>Sweeps</code>.</p></li>
<li><p>You can also click on the <code>Auto Scale All Y Axes</code>
button (orange arrow) to help you see the data faster.</p></li>
</ol>
<p><img src="figures%2FViewer-buttons.png" alt="A screenshot of the Show Signals buttons and other viewering buttons available in the upper toolbar in Clampfit." width="25%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="create-data-sheet">Create data sheet<a class="anchor" aria-label="anchor" href="#create-data-sheet"></a>
</h2>
<ol start="5" style="list-style-type: decimal">
<li>Create a .csv file with six columns: <code>Letter</code>,
<code>ID</code>, <code>Trace</code>, <code>Peak_amplitude</code> and
<code>Time_of_peak</code>.</li>
</ol>
<ul>
<li>
<code>Letter</code> The unique letter identifier of a single
cell.</li>
<li>
<code>ID</code> A character value indicating the recording number.
This corresponds to the <code>File Name</code> column that is
automatically generated in the Results sheet in Clampfit. See below for
a warning about what you should put here.</li>
<li><code>Trace</code></li>
<li><code>Peak_amplitude</code></li>
<li><code>Time_of_peak</code></li>
</ul>
<blockquote>
<p>I would strongly recommend using the filename of the first file in
the series (but write down the concatenated filename in your lab book as
well). This is because Clampfit will auto-generate the concatenated file
names (<code>Concatenate001.abf</code>, <code>Concatenate002.abf</code>,
etc.). If you update your pClamp software, Clampfit will begin naming
files again at <code>Concatenate000.abf</code>, and you could lose track
of which file is which.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="identify-threshold">Identify threshold<a class="anchor" aria-label="anchor" href="#identify-threshold"></a>
</h2>
<blockquote>
<p>To reduce the risk of identifying noise as spontaneous currents, we
must set a detection threshold.</p>
</blockquote>
<ol start="6" style="list-style-type: decimal">
<li>Zoom into a region of the recording with few spontaneous currents
and minimal noise. Place Cursors 1 and 2 around this region.</li>
</ol>
<div class="figure" style="text-align: center">
<img src="figures%2FSpont-currents-baseline.png" alt="A screenshot of a recording in Clampfit with cursors surrounding a relatively flat region of the recording." width="75%"><p class="caption">
Cursors 1 and 2 are surrounding a good baseline region.
</p>
</div>
<blockquote>
<p>You may need to view a smaller number of traces if there are too many
to find a clear region. Use <code>View</code> -&gt;
<code>Select sweeps</code> and select a smaller range.</p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li><p>Click on the Statistics button (a small icon with a summation
symbol on top of it) or press <code>Alt+s</code>.</p></li>
<li><p>Set the following settings to measure noise amplitude in the
baseline:</p></li>
</ol>
<ul>
<li>Trace Selection: Choose <code>Im_primary ()</code> and
<code>All Visible Traces</code>.</li>
<li>Peak Polarity: <code>Im_primary</code>,
<code>Negative-going</code>
</li>
<li>Baseline Region: Mean level <code>Cursors 1..2</code>
</li>
<li>Search Region 1: Range: <code>Cursors 1..2</code>
</li>
<li>Destination Option: <code>Replace results in sheet</code> (prevents
you from accidentally copying old data)</li>
<li>Column Order: <code>Measurement, Region, Signal</code>
</li>
<li>Measurements: <code>Peak_amplitude</code>
</li>
</ul>
<ol start="9" style="list-style-type: decimal">
<li><p>On the results page, copy the values in the
<code>R1S1 Peak</code> column. Paste these into the A column of a blank
Excel sheet.</p></li>
<li><p>In cell B1, type the formula <code>=AVERAGE(A:A)</code>. This
will produce the mean noise amplitude.</p></li>
<li><p>In cell B2, type the formula <code>=STDEV.S(A:A)</code> to get
the standard deviation.</p></li>
<li><p>In cell B3 type <code>=B2*5</code>. This value is the threshold
value (write it down in your lab book).</p></li>
<li><p>You may want to keep this Excel sheet for later use (just replace
the data in the A column each time).</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="set-event-detection-parameters">Set Event Detection parameters<a class="anchor" aria-label="anchor" href="#set-event-detection-parameters"></a>
</h2>
<ol start="14" style="list-style-type: decimal">
<li><p>Click on <code>Event Detection</code> -&gt;
<code>Threshold search</code>. The recording will look faded, and some
new horizontal cursors will appear. Set the Event Polarity to
<code>Negative-going</code>.</p></li>
<li><p>In the <code>Threshold Search</code> box, set the Baseline to 0
and Trigger (pA) to the threshold value that you found in step
12.</p></li>
<li><p>If there are large artifacts, enable the
<code>Reject cursor</code> and drag it to a level below the artifacts.
Any event with an amplitude larger than this reject zone will be
excluded.</p></li>
<li><p>If you are having issues with noise detection, feel free to
experiment with the other settings such as the pre- and post-trigger
lengths and noise rejection.</p></li>
<li><p>Set the search region to <code>Full Trace</code>. Click the
<code>Select</code> button and ensure that all visible traces are
selected.</p></li>
</ol>
<p><img src="figures%2FThreshold-search-box.png" alt="A screenshot of the Event Detection Search Box in Clampfit." width="75%" style="display: block; margin: auto;">
19. Click OK to close the dialog box. If you ever need it again, click
on the <code>Search Parameters</code> button on the bottom left side of
the toolbar.</p>
<p><img src="figures%2Fsearch-parameters-button.png" alt="A screenshot of the Search Parameters button available in the lower toolbar in Clampfit." width="25%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="begin-event-detection">Begin Event Detection<a class="anchor" aria-label="anchor" href="#begin-event-detection"></a>
</h2>
<ol start="20" style="list-style-type: decimal">
<li>Click on the <code>Full Scale X Axis</code> button to view the
entire trace.</li>
</ol>
<p><img src="figures%2FFull-scale-x-axis.png" alt="A screenshot of the Full Scale X Axis button available in the lower toolbar in Clampfit." width="25%" style="display: block; margin: auto;"></p>
<blockquote>
<p>Warning! If you do not check “Full Scale X axis”, Clampfit will
continuously scroll through the recording and it will take much longer
to run.</p>
</blockquote>
<blockquote>
<p>Be sure to uncheck “Automatically open Event Viewer window”! If you
do not do this, Clampfit will continuously refresh this window each time
a new event is detected, leading to crashing and lagging software.</p>
</blockquote>
<ol start="21" style="list-style-type: decimal">
<li>Click on the Nonstop button</li>
</ol>
<p><img src="figures%2FNonstop-button.png" alt="A screenshot of the Nonstop button available in the lower toolbar in Clampfit." width="25%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="faq">FAQ<a class="anchor" aria-label="anchor" href="#faq"></a>
</h2>
<p><em>There are some noisy traces or traces with strange
artifacts.</em></p>
<p>You can exclude individual traces (for example ones with lots of
noise or a very unstable baseline) in the Trace Selection box of Step
11. Select the traces you want to exclude, then <code>Invert</code> your
selection.</p>
<div class="figure" style="text-align: center">
<img src="figures%2FMessy-sweep.png" alt="A screenshot of a recording with a very noisy sweep highlighted in red." width="75%"><p class="caption">
It will be difficult to accurately identify true currents in this sweep.
</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christelinda Laureijs.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
