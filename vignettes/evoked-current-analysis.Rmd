---
title: "Evoked Current Analysis"
output: rmarkdown::html_vignette
description: >
  Learn how to analyze raw evoked current data in Clampfit and prepare it
  for use with the package patchclampplotteR.
vignette: >
  %\VignetteIndexEntry{evoked-current-analysis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Evoked Current Analysis

Before using `patchclampplotteR`, you will need to prepare your raw recording data from Clampfit. This vignette will show you how to move your evoked post-synaptic current data from raw .abf recordings to a .csv file.

This demonstration uses a protocol with two stimuli resulting in two evoked currents per sweep.

## Combine recordings

> The data from our lab is not a continuous 30-minute recording. We pause the recording every 5 minutes to obtain parameters like access resistance and capacitance from the membrane test before resuming recording. If your data is already a continuous file, you can skip steps 1-2. step.

## Combine recordings

1. Open the first .abf file in your recording series, and use the `Next File` button to quickly open all files in the series.

2. Click on `Analyze` -> `Concatenate Files` and select all files that belong to a recording from a single cell. All the recordings will be combined into a continuous recording with no gaps. 

```{r concatenate, fig.align = 'center', fig.alt = "A screenshot of the Concatenate files dialog box in Clampfit showing that all files are selected.", echo=F}
knitr::include_graphics("figures/Concatenate-files.png")
```

## View data

3. Click on the `Show Aquistion Signals` button and then `Previous Signal` (blue arrow in the figure below) to view the sweeps showing changes in current (`Im_primary ()`). The traces should all be stacked on top of each other, but if they are not, click on `View` -> `Data Display` -> `Sweeps`.

4. You can also click on the Auto Scale All Y Axes button (orange arrow) to help you see the data faster.

```{r viewer-buttons, fig.align = 'center', fig.alt = "A screenshot of the Show Signals buttons and other viewering buttons available in the upper toolbar in Clampfit.", echo=F}
knitr::include_graphics("figures/Viewer-buttons.png")
```

## Set up cursors

5. You will only need to set this up once per computer. Double-click anywhere in a blank region on the graph to open the `Analysis Window Properties` box.

6. In `Cursor Options`, increase the number of cursor pairs to 3. These 3 pairs will be used to set the baseline, first evoked current, and second evoked current.

7. Position Cursors 1 and 2 before the first stimulus artifact. Cursors 3 and 4 should surround the first evoked current, and Cursors 5 and 6 should surround the second evoked current.

```{r evoked-currents-cursors, fig.align = 'center', fig.alt = "A screenshot of the correct cursor alignment in Clampfit.", echo=F}
knitr::include_graphics("figures/Evoked-currents-cursors.png")
```






Please see the
**Required columns** section of the documentation for
`import_cell_characteristics_df()` for explanations of the required columns and
what they include.
