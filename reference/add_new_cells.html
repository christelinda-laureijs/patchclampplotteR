<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add new data — add_new_cells • patchclampplotteR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add new data — add_new_cells"><meta name="description" content="This function enables you to append new raw recording data onto an existing
datasheet. It makes it easy and convenient to merge the cell parameters (age,
sex, etc.) with new data and add it to your current raw data. This function
also formats the dataset so it is immediately ready for use in functions like
make_normalized_EPSC_data()."><meta property="og:description" content="This function enables you to append new raw recording data onto an existing
datasheet. It makes it easy and convenient to merge the cell parameters (age,
sex, etc.) with new data and add it to your current raw data. This function
also formats the dataset so it is immediately ready for use in functions like
make_normalized_EPSC_data()."><meta property="og:image" content="https://christelinda-laureijs.github.io/patchclampplotteR/logo.png"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-M92L6F0ZB2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M92L6F0ZB2');
</script><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="icon" type="image/x-icon" href="../favicon.ico"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">patchclampplotteR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/patchclampplotteR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/evoked-current-analysis.html">Evoked Current Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/action-potential-analysis.html">Action Potential Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/spontaneous-current-analysis.html">Spontaneous Current Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/FAQ.html">FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/christelinda-laureijs/patchclampplotteR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add new data</h1>
      <small class="dont-index">Source: <a href="https://github.com/christelinda-laureijs/patchclampplotteR/blob/main/R/Import-data.R" class="external-link"><code>R/Import-data.R</code></a></small>
      <div class="d-none name"><code>add_new_cells.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function enables you to append new raw recording data onto an existing
datasheet. It makes it easy and convenient to merge the cell parameters (age,
sex, etc.) with new data and add it to your current raw data. This function
also formats the dataset so it is immediately ready for use in functions like
<code><a href="make_normalized_EPSC_data.html">make_normalized_EPSC_data()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_new_cells</span><span class="op">(</span></span>
<span>  <span class="va">new_raw_data_csv</span>,</span>
<span>  <span class="va">cell_characteristics_csv</span>,</span>
<span>  <span class="va">old_raw_data_csv</span>,</span>
<span>  <span class="va">data_type</span>,</span>
<span>  write_new_csv <span class="op">=</span> <span class="st">"yes"</span>,</span>
<span>  <span class="va">new_file_name</span>,</span>
<span>  decimal_places <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  injection_start_time <span class="op">=</span> <span class="fl">265.4</span>,</span>
<span>  length_of_current_injection <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-new-raw-data-csv">new_raw_data_csv<a class="anchor" aria-label="anchor" href="#arg-new-raw-data-csv"></a></dt>
<dd><p>A filepath to a csv containing the new raw data. If
the data are evoked current data (<code>current_type == "eEPSC"</code>) then this must
contain 4 columns: <code>letter</code>, <code>ID</code>, <code>P1</code> and <code>P2</code>. If the data are
spontaneous current data, the columns must be <code>letter</code>, <code>ID</code>,
<code>recording_num</code>, <code>trace</code>, <code>amplitude</code> and <code>time_of_peak</code>. Please see
the section below on required columns for more details.</p></dd>


<dt id="arg-cell-characteristics-csv">cell_characteristics_csv<a class="anchor" aria-label="anchor" href="#arg-cell-characteristics-csv"></a></dt>
<dd><p>A filepath to a csv containing information
about the cells. Please see <code><a href="import_cell_characteristics_df.html">import_cell_characteristics_df()</a></code> for a
description of what columns should be included. Don't forget to update this
to include the cell characteristics for the new letters in
<code>new_raw_data_csv</code>!</p></dd>


<dt id="arg-old-raw-data-csv">old_raw_data_csv<a class="anchor" aria-label="anchor" href="#arg-old-raw-data-csv"></a></dt>
<dd><p>A filepath to a csv containing the current raw data.
Since this function appends the new data to the old data, this must be of
the same current_type as the new data (e.g. the columns must be the same).
If this is the first time you are running this function, start with a blank
.csv file containing just the column titles in the first row.</p></dd>


<dt id="arg-data-type">data_type<a class="anchor" aria-label="anchor" href="#arg-data-type"></a></dt>
<dd><p>A character (<code>"eEPSC"</code>, <code>"sEPSC"</code>, <code>"AP_parameter"</code> or <code>"AP_count"</code>) describing the data type that is being imported.</p></dd>


<dt id="arg-write-new-csv">write_new_csv<a class="anchor" aria-label="anchor" href="#arg-write-new-csv"></a></dt>
<dd><p>A character (<code>"yes"</code> or <code>"no"</code>) describing if the new data
should be written to a csv file. Defaults to <code>"yes"</code>. Please specify
a filename for the new csv file in <code>new_file_name</code>.</p></dd>


<dt id="arg-new-file-name">new_file_name<a class="anchor" aria-label="anchor" href="#arg-new-file-name"></a></dt>
<dd><p>A filename for the csv containing the new data appended
to the old data. Must be a character representing a filepath to a csv file.
Examples include <code>"Data/20241118-Raw-eEPSC-data.csv"</code>.</p></dd>


<dt id="arg-decimal-places">decimal_places<a class="anchor" aria-label="anchor" href="#arg-decimal-places"></a></dt>
<dd><p>A numeric value indicating the number of decimal places the data should be rounded to. Used to reduce file size and prevent an incorrect representation of the number of significant digits.</p></dd>


<dt id="arg-injection-start-time">injection_start_time<a class="anchor" aria-label="anchor" href="#arg-injection-start-time"></a></dt>
<dd><p>For action potential data only: A numeric value describing the start time (in ms) when current injection was applied. Used to calculate the latency to fire.</p></dd>


<dt id="arg-length-of-current-injection">length_of_current_injection<a class="anchor" aria-label="anchor" href="#arg-length-of-current-injection"></a></dt>
<dd><p>For action potential data only: A numeric value indicating the duration of the current injection (in s, default is 0.5 s).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe consisting of the old raw data with information from the new
cells appended to it. If <code>data_type == "AP_parameter"</code> two new columns will also be
added based on calculations from the existing columns. These are
<code>latency_to_fire</code> (which is <code>time_to_peak</code> - <code>injection_start_time</code>) and
<code>antipeak_time_relative_to_threshold</code> (which is <code>time_of_antipeak</code> -
<code>time_of_threshold</code>). If <code>data_type == "AP_count"</code> two new columns will be added. These are <code>AP_frequency</code> (in Hz) and <code>current_injection</code> (in pA).</p>
    </div>
    <div class="section level2">
    <h2 id="required-columns">Required Columns<a class="anchor" aria-label="anchor" href="#required-columns"></a></h2>



<p>If the data are evoked currents (<code>data_type == "eEPSC"</code>), the data must
contain the following four columns:</p>
<ul><li><p><code>letter</code> A character value that is a unique identifier for a single
recording. Used to link data sets for evoked or spontaneous currents and
cell-characteristics.</p></li>
<li><p><code>ID</code> A character value for the recording filename.</p></li>
<li><p><code>P1</code> A numeric value representing the
amplitude of the first evoked current in pA.</p></li>
<li><p><code>P2</code> A numeric value representing the
amplitude of the second evoked current in pA.</p></li>
</ul><p>If the data are spontaneous currents (<code>data_type == "sEPSC"</code>), the data
must contain the following columns:</p><ul><li><p><code>letter</code> A character value that is a unique identifier for a single
recording. Used to link data sets for evoked or spontaneous currents and
cell-characteristics.</p></li>
<li><p><code>ID</code> A character value for the recording filename.</p></li>
<li><p><code>recording_num</code> A numeric value representing the recording number.
This was incorporated before we switched to concatenating all recordings
into one, but it needs to remain here to prevent breaking previous projects.
It should be set to 1.</p></li>
<li><p><code>trace</code> A numeric value representing the trace (automatically
generated in Clampfit) where the current occurred.</p></li>
<li><p><code>amplitude</code> A numeric value representing the amplitude of the evoked
current in pA.</p></li>
<li><p><code>time_of_peak</code> A numeric value representing the time of the peak in
milliseconds relative to trace number. This is automatically calculated in
Clampfit.</p></li>
</ul><p>If the data are action potential parameters (<code>data_type == "AP_parameter"</code>), the data
must contain the following columns:</p><ul><li><p><code>letter</code> A character value that is a unique identifier for a single
recording. Used to link data sets for evoked or spontaneous currents and
cell-characteristics.</p></li>
<li><p><code>ID</code> A character value for the recording filename.</p></li>
<li><p><code>state</code> A character (<code>"Baseline"</code> or <code>"Insulin"</code>) representing
the timepoint that the data point belongs to.</p></li>
<li><p><code>time_of_threshold</code> The time (in ms) when the membrane potential
reaches the threshold value.</p></li>
<li><p><code>threshold</code> The threshold (in mV). Determined using the first
derivative method, where the threshold is the membrane potential which
results in a derivative of 10 mV/ms or greater (Farries et al., 2010).</p></li>
<li><p><code>t_11</code> The value of the first derivative (action potential velocity in
mV/ms) at threshold.</p></li>
<li><p><code>first_sweep_with_APs</code> The sweep number of the first sweep (going from
lowest to higher current injection values) that resulted in an action
potential.</p></li>
<li><p><code>trace_start</code> An automated value in Clampfit that is not used in the
analysis.</p></li>
<li><p><code>peak_amplitude</code> The peak amplitude (in pA) of the action
potential relative to threshold.</p></li>
<li><p><code>time_to_peak</code> The time to peak
amplitude (in ms) relative to the time of threshold.</p></li>
<li><p><code>antipeak_amplitude</code> The after-hyperpolarization amplitude (in pA) relative
to threshold.</p></li>
<li><p><code>time_of_antipeak</code> The time of the after-hyperpolarization (in ms).</p></li>
<li><p><code>half_width</code> The half-width, which is the width of the action potential and half of the peak amplitude.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="import_cell_characteristics_df.html">import_cell_characteristics_df()</a></code> for a list of required columns in the <code>cell_characteristics_csv</code>.</p>
<p><code><a href="make_normalized_EPSC_data.html">make_normalized_EPSC_data()</a></code> for the next step in the analysis process.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">add_new_cells</span><span class="op">(</span></span></span>
<span class="r-in"><span>  new_raw_data_csv <span class="op">=</span> <span class="fu"><a href="import_ext_data.html">import_ext_data</a></span><span class="op">(</span><span class="st">"sample_new_eEPSC_data.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cell_characteristics_csv <span class="op">=</span> <span class="fu"><a href="import_ext_data.html">import_ext_data</a></span><span class="op">(</span><span class="st">"sample_cell_characteristics.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  old_raw_data_csv <span class="op">=</span> <span class="fu"><a href="import_ext_data.html">import_ext_data</a></span><span class="op">(</span><span class="st">"sample_eEPSC_data.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data_type <span class="op">=</span> <span class="st">"eEPSC"</span>,</span></span>
<span class="r-in"><span>  write_new_csv <span class="op">=</span> <span class="st">"no"</span>,</span></span>
<span class="r-in"><span>  new_file_name <span class="op">=</span> <span class="st">"20241118-Raw-eEPSC-Data.csv"</span>,</span></span>
<span class="r-in"><span>  decimal_places <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://christelindalaureijs.com" class="external-link">Christelinda Laureijs</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

