<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import and normalize raw current data — make_normalized_EPSC_data • patchclampplotteR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import and normalize raw current data — make_normalized_EPSC_data"><meta name="description" content="make_normalized_EPSC_data() creates a dataframe of evoked or spontaneous
current data from a raw .csv file. The function will create a new column
containing the evoked or spontaneous current amplitudes normalized relative
to the mean current amplitude during the baseline period. For evoked current
data, the function also adds a column for the paired pulse ratio (PPR = P2/P1, where P2 is the amplitude of the second evoked current)."><meta property="og:description" content="make_normalized_EPSC_data() creates a dataframe of evoked or spontaneous
current data from a raw .csv file. The function will create a new column
containing the evoked or spontaneous current amplitudes normalized relative
to the mean current amplitude during the baseline period. For evoked current
data, the function also adds a column for the paired pulse ratio (PPR = P2/P1, where P2 is the amplitude of the second evoked current)."><meta property="og:image" content="https://christelinda-laureijs.github.io/patchclampplotteR/logo.png"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-M92L6F0ZB2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M92L6F0ZB2');
</script><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="icon" type="image/x-icon" href="../favicon.ico"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">patchclampplotteR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/patchclampplotteR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/action-potential-analysis.html">Action Potential Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/evoked-current-analysis-clampfit-Rmd.html">Evoked Current Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/evoked-current-analysis.html">Evoked Current Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/christelinda-laureijs/patchclampplotteR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Import and normalize raw current data</h1>
      <small class="dont-index">Source: <a href="https://github.com/christelinda-laureijs/patchclampplotteR/blob/main/R/Process-data.R" class="external-link"><code>R/Process-data.R</code></a></small>
      <div class="d-none name"><code>make_normalized_EPSC_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>make_normalized_EPSC_data()</code> creates a dataframe of evoked or spontaneous
current data from a raw .csv file. The function will create a new column
containing the evoked or spontaneous current amplitudes normalized relative
to the mean current amplitude during the baseline period. For evoked current
data, the function also adds a column for the paired pulse ratio (<code>PPR = P2/P1</code>, where <code>P2</code> is the amplitude of the second evoked current).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_normalized_EPSC_data</span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"Data/Sample-eEPSC-data.csv"</span>,</span>
<span>  current_type <span class="op">=</span> <span class="st">"eEPSC"</span>,</span>
<span>  min_time_value <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  max_time_value <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  baseline_length <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  interval_length <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  decimal_places <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  negative_transform_currents <span class="op">=</span> <span class="st">"yes"</span>,</span>
<span>  save_output_as_RDS <span class="op">=</span> <span class="st">"no"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>A filepath to a .csv file. See <code><a href="add_new_cells.html">add_new_cells()</a></code> for the
function that will merge raw data (a .csv with 4 columns: <code>letter</code>, <code>ID</code>,
<code>P1</code>, and <code>P2</code>) and a <code>cell-characteristics.csv</code> file (with columns for
factors like <code>animal</code>, <code>age</code>, <code>sex</code>, <code>synapses</code>). Please see the section on
"Required columns" below.</p></dd>


<dt id="arg-current-type">current_type<a class="anchor" aria-label="anchor" href="#arg-current-type"></a></dt>
<dd><p>A character describing the current type. Allowed values
are "eEPSC" or "sEPSC".</p></dd>


<dt id="arg-min-time-value">min_time_value<a class="anchor" aria-label="anchor" href="#arg-min-time-value"></a></dt>
<dd><p>Minimum time value (numeric; in minutes), which
defaults to 0.</p></dd>


<dt id="arg-max-time-value">max_time_value<a class="anchor" aria-label="anchor" href="#arg-max-time-value"></a></dt>
<dd><p>Maximum recording length (numeric; in minutes). All
data points will be filtered to time values less than or equal to this
value. Defaults to 25.</p></dd>


<dt id="arg-baseline-length">baseline_length<a class="anchor" aria-label="anchor" href="#arg-baseline-length"></a></dt>
<dd><p>Length of the baseline (numeric; in minutes). Refers
to data collected before applying a hormone, antagonist, or a protocol like
high frequency stimulation. Defaults to 5.</p></dd>


<dt id="arg-interval-length">interval_length<a class="anchor" aria-label="anchor" href="#arg-interval-length"></a></dt>
<dd><p>Length of each interval (numeric; in minutes). Used to
divide the dataset into broad ranges for statistical analysis. Important!
<code>max_recording_length</code> must be evenly divisible by <code>interval_length</code>.
Defaults to 5.</p></dd>


<dt id="arg-decimal-places">decimal_places<a class="anchor" aria-label="anchor" href="#arg-decimal-places"></a></dt>
<dd><p>A numeric value indicating the number of decimal places
the data should be rounded to. Used to reduce file size and prevent an
incorrect representation of the number of significant digits.</p></dd>


<dt id="arg-negative-transform-currents">negative_transform_currents<a class="anchor" aria-label="anchor" href="#arg-negative-transform-currents"></a></dt>
<dd><p>A character ("yes" or "no") describing if
<code>P1</code> and <code>P2</code> should be negative transformed. If "yes", the values will be
multiplied by (-1). This only applies when <code>current_type == "eEPSC"</code> - It
will be ignored for spontaneous current data.</p></dd>


<dt id="arg-save-output-as-rds">save_output_as_RDS<a class="anchor" aria-label="anchor" href="#arg-save-output-as-rds"></a></dt>
<dd><p>A character ("yes" or "no") describing if the
resulting object should be saved as an RDS file in the raw data folder.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe that can be viewed and used for further analyses in R.
New or modified columns include:</p><ul><li><p><code>P1</code> (for evoked currents only) May be negative-transformed if
<code>negative_transform</code> == "yes"</p></li>
<li><p><code>P2</code> (for evoked currents only) May be negative-transformed if
<code>negative_transform</code> == "yes"</p></li>
<li><p><code>PPR</code> (for evoked currents only) A numeric value that represents the
paired pulse ratio (PPR) of the evoked currents, generated using
<code>dplyr::mutate(PPR = P2/P1)</code>.</p></li>
<li><p><code>interval</code> A character value indicating the interval that the data
point belongs to. For example, <code>interval</code> will be "t0to5" for any data
points from 0 to 5 minutes. Example values: "t0to5", "t5to10", etc.</p></li>
<li><p><code>baseline_range</code> A logical value required for the baseline
transformation. It is set to TRUE when time is within the baseline period
(e.g. Time &lt;= 5) and FALSE at all other times.</p></li>
<li><p><code>baseline_mean</code> A numeric value representing the mean evoked current
amplitude during the baseline period. There is a different baseline_mean for
each letter.</p></li>
<li><p><code>P1_transformed</code> (for evoked currents only) A numeric value
representing the first evoked current
amplitude (pA) normalized relative to the mean amplitude during the
recording's baseline.</p></li>
<li><p><code>P2_transformed</code> (for evoked currents only) A numeric value
representing the second evoked current amplitude (pA) normalized relative to
the mean amplitude during the recording's baseline.</p></li>
<li><p><code>amplitude_transformed</code> (for spontaneous currents only) A numeric
value representing the spontaneous current amplitude (pA) normalized
relative to the mean amplitude during the recording's baseline.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="required-basic-columns">Required basic columns<a class="anchor" aria-label="anchor" href="#required-basic-columns"></a></h2>


<p>It doesn't matter if the data are evoked or current type - these columns
should be included in your data.</p><ul><li><p><code>letter</code> A character value that is a unique identifier for a single
recording. Used to link data sets for evoked or spontaneous currents and
cell-characteristics.</p></li>
<li><p><code>synapses</code> A character value (e.g. "Glutamate" or "GABA").</p></li>
<li><p><code>sex</code> A character value (e.g. "Male" or "Female").</p></li>
<li><p><code>treatment</code> A character value (e.g. "Control", "HNMPA").</p></li>
<li><p><code>time</code> A numeric value that represents time in minutes. This column is
autogenerated in <code><a href="add_new_cells.html">add_new_cells()</a></code>.</p></li>
<li><p><code>ID</code> A character value for the recording filename.</p></li>
<li><p><code>X</code> A numeric value representing the x-value of the cell's location in
µm. Leave this blank if you don't have this data.</p></li>
<li><p><code>Y</code> A numeric value representing the y-value of the cell's location in
µm. Leave this blank if you don't have this data.</p></li>
<li><p><code>age</code> A numeric value representing the animal's age. Can be any value
as long as the time units are consistent throughout (e.g. don't mix up days
and months when reporting animal ages).</p></li>
<li><p><code>animal</code> A numeric value representing the animal's ID or number.</p></li>
<li><p><code>category</code> A numeric value representing the experiment type. Used to
assign top-level groups for further analyses, with <code>treatment</code> as subgroups.</p></li>
<li><p><code>cell</code> A character or numeric value representing the cell. For
example, use <code>3.1.1</code> for animal #3, slice #1, cell #1.</p></li>
</ul><p><strong>Evoked current data</strong>:</p>
<p>If the data are evoked currents (<code>current_type == "eEPSC"</code>), the data must
contain the basic columns mentioned in <strong>Required basic columns</strong> plus these
columns:</p>
<ul><li><p><code>P1</code> A numeric value representing the
amplitude of the first evoked current in pA.</p></li>
<li><p><code>P2</code> A numeric value representing the
amplitude of the second evoked current in pA.</p></li>
</ul><p><strong>Spontaneous current data:</strong></p>
<p>If the data are spontaneous currents (<code>current_type == "sEPSC"</code>), the data
must contain the basic columns mentioned in <strong>Required basic columns</strong> plus
these columns:</p><ul><li><p><code>recording_num</code> A numeric value representing the recording number.
This was incorporated before we switched to concatenating all recordings
into one, but it needs to remain here to prevent breaking previous projects.
It should be set to 1.</p></li>
<li><p><code>trace</code> A numeric value representing the trace (automatically
generated in Clampfit) where the current occured.</p></li>
<li><p><code>time_of_peak</code> A numeric value representing the time of the peak in
milliseconds relative to trace number. This is automatically calculated in
Clampfit.</p></li>
<li><p><code>time</code> A numeric value representing the absolute time when the current
happened, relative to the start of the recording. This is autogenerated. See
<code><a href="add_new_cells.html">add_new_cells()</a></code> for a description of how the true time value (<code>time</code>) is
calculated from the <code>recording_num</code> and <code>trace.</code></p></li>
<li><p><code>amplitude</code> A numeric value representing the amplitude of the evoked
current in pA.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="add_new_cells.html">add_new_cells()</a></code> to add new recording data to your existing raw
csv. It will merge raw data (a .csv with 4 columns: <code>letter</code>, <code>ID</code>, <code>P1</code>,
and <code>P2</code>) and a <code>cell-characteristics.csv</code> file (with columns for factors
like <code>animal</code>, <code>age</code>, <code>sex</code>, <code>synapses</code>).</p>
<p><code><a href="add_new_cells.html">add_new_cells()</a></code> and <code><a href="make_summary_EPSC_data.html">make_summary_EPSC_data()</a></code> for
functions that further process the data.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">make_normalized_EPSC_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  filename <span class="op">=</span> <span class="fu"><a href="import_ext_data.html">import_ext_data</a></span><span class="op">(</span><span class="st">"sample_eEPSC_data.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  current_type <span class="op">=</span> <span class="st">"eEPSC"</span>,</span></span>
<span class="r-in"><span>  min_time_value <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  max_time_value <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  interval_length <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  baseline_length <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  decimal_places <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  negative_transform_currents <span class="op">=</span> <span class="st">"yes"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5,680 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   letter [19]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    letter synapses  sex   treatment  time ID          P1    P2     X     Y   age</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> AO     Glutamate Male  Control    0    23623002  17.4  78.4    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> AO     Glutamate Male  Control    0.08 23623002  24.1  58.9    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> AO     Glutamate Male  Control    0.17 23623002  35.6  60.0    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> AO     Glutamate Male  Control    0.25 23623002  15.8  32.3    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> AO     Glutamate Male  Control    0.33 23623002  53.9  26.4    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> AO     Glutamate Male  Control    0.42 23623002  45.5  74.8    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> AO     Glutamate Male  Control    0.5  23623002  28.1  69.6    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> AO     Glutamate Male  Control    0.58 23623002  27.8  62.0    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> AO     Glutamate Male  Control    0.67 23623002  60.0  52.7    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> AO     Glutamate Male  Control    0.75 23623002  46.9  60.3    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5,670 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 10 more variables: animal &lt;dbl&gt;, category &lt;fct&gt;, cell &lt;chr&gt;, r_a &lt;lgl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   PPR &lt;dbl&gt;, interval &lt;fct&gt;, baseline_range &lt;lgl&gt;, baseline_mean &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   P1_transformed &lt;dbl&gt;, P2_transformed &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christelinda Laureijs.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

